'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _assign = require('babel-runtime/core-js/object/assign');

var _assign2 = _interopRequireDefault(_assign);

exports.default = detectBackend;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var DEFAULT_HOST = '127.0.0.1';
var DEFAULT_PORT = 4444;

/**
 * helper to detect the Selenium backend according to given capabilities
 */
function detectBackend(options) {
    /**
     * don't detect anything if host or port is given
     */
    if (options.host && options.port) {
        return (0, _assign2.default)(options, {
            host: options.host,
            port: options.port
        });
    }

    /**
     * local Selenium server
     */
    if (!options.user && !options.key) {
        return (0, _assign2.default)(options, {
            host: DEFAULT_HOST,
            port: DEFAULT_PORT
        });
    }

    /**
     * browserstack
     * e.g. zHcv9sZ39ip8ZPsxBVJ2
     */
    if (options.key.length === 20) {
        return (0, _assign2.default)(options, {
            host: 'hub.browserstack.com',
            port: 80
        });
    }

    /**
     * testingbot
     * e.g. ec337d7b677720a4dde7bd72be0bfc67
     */
    if (options.key.length === 32) {
        return (0, _assign2.default)(options, {
            host: 'hub.testingbot.com',
            port: 80
        });
    }

    /**
     * Sauce Labs
     * e.g. 50aa152c-1932-B2f0-9707-18z46q2n1mb0
     */
    return (0, _assign2.default)(options, {
        protocol: 'https',
        host: 'ondemand.saucelabs.com',
        port: 443
    });
}
module.exports = exports['default'];